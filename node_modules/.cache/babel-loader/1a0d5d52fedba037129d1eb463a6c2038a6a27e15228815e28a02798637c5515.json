{"ast":null,"code":"import _objectSpread from\"C:/monami-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/CartPage.js\nimport React,{useEffect,useState}from'react';import{getCartItems,updateCartItem,deleteCartItem}from'../api/cart';import CartItem from'../components/CartItem';import'./CartPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CartPage(){const[cartItems,setCartItems]=useState([]);const[loading,setLoading]=useState(true);const fetchCart=async()=>{try{const data=await getCartItems();setCartItems(data);}catch(error){console.error('장바구니 불러오기 실패',error);}finally{setLoading(false);}};useEffect(()=>{fetchCart();},[]);const handleUpdateQuantity=async(id,quantity)=>{try{await updateCartItem(id,quantity);// 로컬 상태 동기화\nsetCartItems(items=>items.map(item=>item.id===id?_objectSpread(_objectSpread({},item),{},{quantity}):item));}catch(error){console.error('수량 업데이트 실패',error);}};const handleDelete=async id=>{try{await deleteCartItem(id);setCartItems(items=>items.filter(item=>item.id!==id));}catch(error){console.error('삭제 실패',error);}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"\\uB85C\\uB529 \\uC911...\"});if(cartItems.length===0)return/*#__PURE__*/_jsx(\"p\",{children:\"\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uAC00 \\uBE44\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC7A5\\uBC14\\uAD6C\\uB2C8\"}),cartItems.map(item=>/*#__PURE__*/_jsx(CartItem,{item:item,onUpdateQuantity:handleUpdateQuantity,onDelete:handleDelete},item.id))]});}export default CartPage;","map":{"version":3,"names":["React","useEffect","useState","getCartItems","updateCartItem","deleteCartItem","CartItem","jsx","_jsx","jsxs","_jsxs","CartPage","cartItems","setCartItems","loading","setLoading","fetchCart","data","error","console","handleUpdateQuantity","id","quantity","items","map","item","_objectSpread","handleDelete","filter","children","length","className","onUpdateQuantity","onDelete"],"sources":["C:/monami-client/src/pages/CartPage.js"],"sourcesContent":["// src/pages/CartPage.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport { getCartItems, updateCartItem, deleteCartItem } from '../api/cart';\r\nimport CartItem from '../components/CartItem';\r\nimport './CartPage.css';\r\n\r\nfunction CartPage() {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchCart = async () => {\r\n    try {\r\n      const data = await getCartItems();\r\n      setCartItems(data);\r\n    } catch (error) {\r\n      console.error('장바구니 불러오기 실패', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, []);\r\n\r\n  const handleUpdateQuantity = async (id, quantity) => {\r\n    try {\r\n      await updateCartItem(id, quantity);\r\n      // 로컬 상태 동기화\r\n      setCartItems((items) =>\r\n        items.map((item) =>\r\n          item.id === id ? { ...item, quantity } : item\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error('수량 업데이트 실패', error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await deleteCartItem(id);\r\n      setCartItems((items) => items.filter((item) => item.id !== id));\r\n    } catch (error) {\r\n      console.error('삭제 실패', error);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>로딩 중...</p>;\r\n\r\n  if (cartItems.length === 0) return <p>장바구니가 비었습니다.</p>;\r\n\r\n  return (\r\n    <div className=\"cart-page\">\r\n      <h2>장바구니</h2>\r\n      {cartItems.map((item) => (\r\n        <CartItem\r\n          key={item.id}\r\n          item={item}\r\n          onUpdateQuantity={handleUpdateQuantity}\r\n          onDelete={handleDelete}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CartPage;\r\n"],"mappings":"qGAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,YAAY,CAAEC,cAAc,CAAEC,cAAc,KAAQ,aAAa,CAC1E,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExB,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAE5C,KAAM,CAAAc,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAd,YAAY,CAAC,CAAC,CACjCU,YAAY,CAACI,IAAI,CAAC,CACpB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACtC,CAAC,OAAS,CACRH,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDd,SAAS,CAAC,IAAM,CACde,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,oBAAoB,CAAG,KAAAA,CAAOC,EAAE,CAAEC,QAAQ,GAAK,CACnD,GAAI,CACF,KAAM,CAAAlB,cAAc,CAACiB,EAAE,CAAEC,QAAQ,CAAC,CAClC;AACAT,YAAY,CAAEU,KAAK,EACjBA,KAAK,CAACC,GAAG,CAAEC,IAAI,EACbA,IAAI,CAACJ,EAAE,GAAKA,EAAE,CAAAK,aAAA,CAAAA,aAAA,IAAQD,IAAI,MAAEH,QAAQ,GAAKG,IAC3C,CACF,CAAC,CACH,CAAE,MAAOP,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,YAAY,CAAEA,KAAK,CAAC,CACpC,CACF,CAAC,CAED,KAAM,CAAAS,YAAY,CAAG,KAAO,CAAAN,EAAE,EAAK,CACjC,GAAI,CACF,KAAM,CAAAhB,cAAc,CAACgB,EAAE,CAAC,CACxBR,YAAY,CAAEU,KAAK,EAAKA,KAAK,CAACK,MAAM,CAAEH,IAAI,EAAKA,IAAI,CAACJ,EAAE,GAAKA,EAAE,CAAC,CAAC,CACjE,CAAE,MAAOH,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,OAAO,CAAEA,KAAK,CAAC,CAC/B,CACF,CAAC,CAED,GAAIJ,OAAO,CAAE,mBAAON,IAAA,MAAAqB,QAAA,CAAG,wBAAO,CAAG,CAAC,CAElC,GAAIjB,SAAS,CAACkB,MAAM,GAAK,CAAC,CAAE,mBAAOtB,IAAA,MAAAqB,QAAA,CAAG,gEAAY,CAAG,CAAC,CAEtD,mBACEnB,KAAA,QAAKqB,SAAS,CAAC,WAAW,CAAAF,QAAA,eACxBrB,IAAA,OAAAqB,QAAA,CAAI,0BAAI,CAAI,CAAC,CACZjB,SAAS,CAACY,GAAG,CAAEC,IAAI,eAClBjB,IAAA,CAACF,QAAQ,EAEPmB,IAAI,CAAEA,IAAK,CACXO,gBAAgB,CAAEZ,oBAAqB,CACvCa,QAAQ,CAAEN,YAAa,EAHlBF,IAAI,CAACJ,EAIX,CACF,CAAC,EACC,CAAC,CAEV,CAEA,cAAe,CAAAV,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}