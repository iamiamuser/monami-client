{"ast":null,"code":"var _jsxFileName = \"C:\\\\monami-client\\\\src\\\\pages\\\\HomePage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport ProductCard from '../components/ProductCard'; // 수량 조절 UI 포함시 여기서 수정 필요\nimport './HomePage.css';\nimport { fetchProducts } from '../api/products';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction useQuery() {\n  _s();\n  return new URLSearchParams(useLocation().search);\n}\n_s(useQuery, \"EuD9q2dZ34PfN/QO2OBhBzeMxmY=\", false, function () {\n  return [useLocation];\n});\nfunction HomePage() {\n  _s2();\n  const location = useLocation();\n  const query = useQuery();\n  const category = query.get('category');\n  const navigate = useNavigate();\n  const [products, setProducts] = useState([]);\n  const [quantities, setQuantities] = useState({}); // { productId: quantity }\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    setLoading(true);\n    fetchProducts(category).then(data => {\n      setProducts(data);\n      // 초기 수량 0 세팅\n      const initialQuantities = {};\n      data.forEach(product => {\n        initialQuantities[product.id] = 0;\n      });\n      setQuantities(initialQuantities);\n    }).catch(() => {\n      setProducts([]);\n      setQuantities({});\n    }).finally(() => setLoading(false));\n  }, [category, location.search]);\n  const handleQuantityChange = (productId, value) => {\n    // 음수나 소수 방지, 정수 0 이상만 허용\n    const qty = Math.max(0, Math.floor(value));\n    setQuantities(prev => ({\n      ...prev,\n      [productId]: qty\n    }));\n  };\n  const handleAddToCart = () => {\n    // 1 이상 수량인 상품들만 필터링\n    const itemsToAdd = products.filter(product => quantities[product.id] > 0).map(product => ({\n      product,\n      quantity: quantities[product.id]\n    }));\n    if (itemsToAdd.length === 0) {\n      alert('수량이 1 이상인 상품을 선택해주세요.');\n      return;\n    }\n\n    // 기존 장바구니 불러오기\n    const existingCart = JSON.parse(localStorage.getItem('cart')) || [];\n\n    // 기존 장바구니에 추가 (중복상품 수량 합산)\n    const updatedCart = [...existingCart];\n    itemsToAdd.forEach(({\n      product,\n      quantity\n    }) => {\n      const index = updatedCart.findIndex(item => item.product.id === product.id);\n      if (index >= 0) {\n        // 기존 수량에 합산\n        updatedCart[index].quantity += quantity;\n      } else {\n        updatedCart.push({\n          product,\n          quantity\n        });\n      }\n    });\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\n    alert('장바구니에 추가되었습니다!');\n    navigate('/cart');\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\uC0C1\\uD488\\uC744 \\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC785\\uB2C8\\uB2E4...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 23\n  }, this);\n  if (products.length === 0) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\uD574\\uB2F9 \\uCE74\\uD14C\\uACE0\\uB9AC\\uC758 \\uC0C1\\uD488\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 37\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products-container\",\n      children: products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(ProductCard, {\n          product: product\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '8px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"\\uC218\\uB7C9:\", ' ', /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"0\",\n              value: quantities[product.id] || 0,\n              onChange: e => handleQuantityChange(product.id, e.target.value),\n              style: {\n                width: '60px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddToCart,\n      style: {\n        marginTop: '20px',\n        padding: '10px 20px',\n        fontSize: '16px'\n      },\n      children: \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uC5D0 \\uCD94\\uAC00\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n_s2(HomePage, \"bfOX8m05C2wv/2UEwMhYk31v9PM=\", false, function () {\n  return [useLocation, useQuery, useNavigate];\n});\n_c = HomePage;\nexport default HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","ProductCard","fetchProducts","jsxDEV","_jsxDEV","useQuery","_s","URLSearchParams","search","HomePage","_s2","location","query","category","get","navigate","products","setProducts","quantities","setQuantities","loading","setLoading","then","data","initialQuantities","forEach","product","id","catch","finally","handleQuantityChange","productId","value","qty","Math","max","floor","prev","handleAddToCart","itemsToAdd","filter","map","quantity","length","alert","existingCart","JSON","parse","localStorage","getItem","updatedCart","index","findIndex","item","push","setItem","stringify","children","fileName","_jsxFileName","lineNumber","columnNumber","className","style","marginBottom","marginTop","type","min","onChange","e","target","width","onClick","padding","fontSize","_c","$RefreshReg$"],"sources":["C:/monami-client/src/pages/HomePage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport ProductCard from '../components/ProductCard'; // 수량 조절 UI 포함시 여기서 수정 필요\r\nimport './HomePage.css';\r\nimport { fetchProducts } from '../api/products';\r\n\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nfunction HomePage() {\r\n  const location = useLocation();\r\n  const query = useQuery();\r\n  const category = query.get('category');\r\n  const navigate = useNavigate();\r\n\r\n  const [products, setProducts] = useState([]);\r\n  const [quantities, setQuantities] = useState({}); // { productId: quantity }\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    fetchProducts(category)\r\n      .then(data => {\r\n        setProducts(data);\r\n        // 초기 수량 0 세팅\r\n        const initialQuantities = {};\r\n        data.forEach(product => {\r\n          initialQuantities[product.id] = 0;\r\n        });\r\n        setQuantities(initialQuantities);\r\n      })\r\n      .catch(() => {\r\n        setProducts([]);\r\n        setQuantities({});\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, [category, location.search]);\r\n\r\n  const handleQuantityChange = (productId, value) => {\r\n    // 음수나 소수 방지, 정수 0 이상만 허용\r\n    const qty = Math.max(0, Math.floor(value));\r\n    setQuantities(prev => ({\r\n      ...prev,\r\n      [productId]: qty,\r\n    }));\r\n  };\r\n\r\n  const handleAddToCart = () => {\r\n    // 1 이상 수량인 상품들만 필터링\r\n    const itemsToAdd = products\r\n      .filter(product => quantities[product.id] > 0)\r\n      .map(product => ({\r\n        product,\r\n        quantity: quantities[product.id],\r\n      }));\r\n\r\n    if (itemsToAdd.length === 0) {\r\n      alert('수량이 1 이상인 상품을 선택해주세요.');\r\n      return;\r\n    }\r\n\r\n    // 기존 장바구니 불러오기\r\n    const existingCart = JSON.parse(localStorage.getItem('cart')) || [];\r\n\r\n    // 기존 장바구니에 추가 (중복상품 수량 합산)\r\n    const updatedCart = [...existingCart];\r\n\r\n    itemsToAdd.forEach(({ product, quantity }) => {\r\n      const index = updatedCart.findIndex(item => item.product.id === product.id);\r\n      if (index >= 0) {\r\n        // 기존 수량에 합산\r\n        updatedCart[index].quantity += quantity;\r\n      } else {\r\n        updatedCart.push({ product, quantity });\r\n      }\r\n    });\r\n\r\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n    alert('장바구니에 추가되었습니다!');\r\n    navigate('/cart');\r\n  };\r\n\r\n  if (loading) return <p>상품을 불러오는 중입니다...</p>;\r\n  if (products.length === 0) return <p>해당 카테고리의 상품이 없습니다.</p>;\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"products-container\">\r\n        {products.map(product => (\r\n          <div key={product.id} style={{ marginBottom: '20px' }}>\r\n            <ProductCard product={product} />\r\n            <div style={{ marginTop: '8px' }}>\r\n              <label>\r\n                수량:{' '}\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  value={quantities[product.id] || 0}\r\n                  onChange={(e) => handleQuantityChange(product.id, e.target.value)}\r\n                  style={{ width: '60px' }}\r\n                />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleAddToCart}\r\n        style={{ marginTop: '20px', padding: '10px 20px', fontSize: '16px' }}\r\n      >\r\n        장바구니에 추가\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}