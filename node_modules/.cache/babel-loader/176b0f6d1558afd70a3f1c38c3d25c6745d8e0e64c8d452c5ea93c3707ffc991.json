{"ast":null,"code":"import _objectSpread from\"C:/monami-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{createOrder,processPayment}from'../api/payment';import OCRUploader from'../components/OCRUploader';import'./CheckoutPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CheckoutPage(){const[form,setForm]=useState({name:'',address:'',cardNumber:'',expiry:'',cvc:''});const[loading,setLoading]=useState(false);const[orderSuccess,setOrderSuccess]=useState(false);const[error,setError]=useState(null);const[ocrResult,setOcrResult]=useState(null);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleOCRComplete=text=>{setOcrResult(text);};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);try{// 1. 결제 처리\nconst paymentRes=await processPayment({cardNumber:form.cardNumber,expiry:form.expiry,cvc:form.cvc,amount:100// 예시 금액 (실제 금액 계산 필요)\n});// 2. 주문 생성\nconst orderRes=await createOrder({name:form.name,address:form.address,paymentId:paymentRes.id,ocrData:ocrResult});setOrderSuccess(true);}catch(err){setError('결제 또는 주문 처리 중 오류가 발생했습니다.');}finally{setLoading(false);}};if(orderSuccess){return/*#__PURE__*/_jsx(\"div\",{children:\"\\uC8FC\\uBB38\\uC774 \\uC131\\uACF5\\uC801\\uC73C\\uB85C \\uC644\\uB8CC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4! \\uAC10\\uC0AC\\uD569\\uB2C8\\uB2E4.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uACB0\\uC81C \\uBC0F \\uC8FC\\uBB38\"}),/*#__PURE__*/_jsx(OCRUploader,{onComplete:handleOCRComplete}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"checkout-form\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\uC774\\uB984:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:form.name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\uBC30\\uC1A1 \\uC8FC\\uC18C:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",value:form.address,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\uCE74\\uB4DC \\uBC88\\uD638:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"cardNumber\",value:form.cardNumber,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\uB9CC\\uB8CC\\uC77C:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"expiry\",value:form.expiry,onChange:handleChange,placeholder:\"MM/YY\",required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"CVC:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"cvc\",value:form.cvc,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'처리 중...':'결제하기'}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error})]})]});}export default CheckoutPage;","map":{"version":3,"names":["React","useState","createOrder","processPayment","OCRUploader","jsx","_jsx","jsxs","_jsxs","CheckoutPage","form","setForm","name","address","cardNumber","expiry","cvc","loading","setLoading","orderSuccess","setOrderSuccess","error","setError","ocrResult","setOcrResult","handleChange","e","_objectSpread","target","value","handleOCRComplete","text","handleSubmit","preventDefault","paymentRes","amount","orderRes","paymentId","id","ocrData","err","children","className","onComplete","onSubmit","type","onChange","required","placeholder","disabled"],"sources":["C:/monami-client/src/pages/CheckoutPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { createOrder, processPayment } from '../api/payment';\r\nimport OCRUploader from '../components/OCRUploader';\r\nimport './CheckoutPage.css';\r\n\r\nfunction CheckoutPage() {\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    address: '',\r\n    cardNumber: '',\r\n    expiry: '',\r\n    cvc: '',\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [orderSuccess, setOrderSuccess] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [ocrResult, setOcrResult] = useState(null);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleOCRComplete = (text) => {\r\n    setOcrResult(text);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // 1. 결제 처리\r\n      const paymentRes = await processPayment({\r\n        cardNumber: form.cardNumber,\r\n        expiry: form.expiry,\r\n        cvc: form.cvc,\r\n        amount: 100, // 예시 금액 (실제 금액 계산 필요)\r\n      });\r\n\r\n      // 2. 주문 생성\r\n      const orderRes = await createOrder({\r\n        name: form.name,\r\n        address: form.address,\r\n        paymentId: paymentRes.id,\r\n        ocrData: ocrResult,\r\n      });\r\n\r\n      setOrderSuccess(true);\r\n    } catch (err) {\r\n      setError('결제 또는 주문 처리 중 오류가 발생했습니다.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (orderSuccess) {\r\n    return <div>주문이 성공적으로 완료되었습니다! 감사합니다.</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"checkout-page\">\r\n      <h2>결제 및 주문</h2>\r\n      <OCRUploader onComplete={handleOCRComplete} />\r\n      <form onSubmit={handleSubmit} className=\"checkout-form\">\r\n        <label>\r\n          이름:\r\n          <input type=\"text\" name=\"name\" value={form.name} onChange={handleChange} required />\r\n        </label>\r\n        <label>\r\n          배송 주소:\r\n          <input type=\"text\" name=\"address\" value={form.address} onChange={handleChange} required />\r\n        </label>\r\n        <label>\r\n          카드 번호:\r\n          <input type=\"text\" name=\"cardNumber\" value={form.cardNumber} onChange={handleChange} required />\r\n        </label>\r\n        <label>\r\n          만료일:\r\n          <input type=\"text\" name=\"expiry\" value={form.expiry} onChange={handleChange} placeholder=\"MM/YY\" required />\r\n        </label>\r\n        <label>\r\n          CVC:\r\n          <input type=\"text\" name=\"cvc\" value={form.cvc} onChange={handleChange} required />\r\n        </label>\r\n        <button type=\"submit\" disabled={loading}>\r\n          {loading ? '처리 중...' : '결제하기'}\r\n        </button>\r\n        {error && <p className=\"error\">{error}</p>}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckoutPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}