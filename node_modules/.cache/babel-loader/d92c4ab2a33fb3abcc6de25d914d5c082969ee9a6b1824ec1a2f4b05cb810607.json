{"ast":null,"code":"var _jsxFileName = \"C:\\\\monami-client\\\\src\\\\pages\\\\CartPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport ProductCard from '../components/ProductCard';\nimport './HomePage.css';\nimport { fetchProducts } from '../api/products';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction useQuery() {\n  _s();\n  return new URLSearchParams(useLocation().search);\n}\n_s(useQuery, \"EuD9q2dZ34PfN/QO2OBhBzeMxmY=\", false, function () {\n  return [useLocation];\n});\nfunction HomePage() {\n  _s2();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const query = useQuery();\n  const category = query.get('category');\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [quantities, setQuantities] = useState({}); // productId: 수량\n\n  useEffect(() => {\n    setLoading(true);\n    fetchProducts(category).then(data => setProducts(data)).catch(() => setProducts([])).finally(() => setLoading(false));\n  }, [category, location.search]);\n  const handleQuantityChange = (productId, qty) => {\n    if (qty < 0) return;\n    setQuantities(prev => ({\n      ...prev,\n      [productId]: qty\n    }));\n  };\n  const handleAddToCart = () => {\n    // 수량 1 이상인 상품만 필터링\n    const selectedItems = products.filter(product => quantities[product.id] > 0).map(product => ({\n      product,\n      quantity: quantities[product.id]\n    }));\n    if (selectedItems.length === 0) {\n      alert('수량을 1개 이상 선택해주세요.');\n      return;\n    }\n\n    // 기존 장바구니 불러오기\n    const existingCart = JSON.parse(localStorage.getItem('cart')) || [];\n\n    // 기존 장바구니에 새로 선택한 상품 합치기 (같은 상품은 수량 합산)\n    const updatedCart = [...existingCart];\n    selectedItems.forEach(({\n      product,\n      quantity\n    }) => {\n      const index = updatedCart.findIndex(item => item.product.id === product.id);\n      if (index >= 0) {\n        updatedCart[index].quantity += quantity;\n      } else {\n        updatedCart.push({\n          product,\n          quantity\n        });\n      }\n    });\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\n\n    // 수량 초기화\n    setQuantities({});\n\n    // 장바구니 페이지로 이동\n    navigate('/cart');\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\uC0C1\\uD488\\uC744 \\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC785\\uB2C8\\uB2E4...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 23\n  }, this);\n  if (products.length === 0) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\uD574\\uB2F9 \\uCE74\\uD14C\\uACE0\\uB9AC\\uC758 \\uC0C1\\uD488\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 37\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"products-container\",\n    children: [products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-item\",\n      children: [/*#__PURE__*/_jsxDEV(ProductCard, {\n        product: product\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        min: \"0\",\n        value: quantities[product.id] || 0,\n        onChange: e => handleQuantityChange(product.id, Number(e.target.value)),\n        style: {\n          width: '60px',\n          marginTop: '5px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, product.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddToCart,\n      style: {\n        marginTop: '20px',\n        padding: '10px 20px'\n      },\n      children: \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uC5D0 \\uB2F4\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s2(HomePage, \"FwmHMw6Jj9TMYkWzbWI1ufAjE4U=\", false, function () {\n  return [useLocation, useNavigate, useQuery];\n});\n_c = HomePage;\nexport default HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","ProductCard","fetchProducts","jsxDEV","_jsxDEV","useQuery","_s","URLSearchParams","search","HomePage","_s2","location","navigate","query","category","get","products","setProducts","loading","setLoading","quantities","setQuantities","then","data","catch","finally","handleQuantityChange","productId","qty","prev","handleAddToCart","selectedItems","filter","product","id","map","quantity","length","alert","existingCart","JSON","parse","localStorage","getItem","updatedCart","forEach","index","findIndex","item","push","setItem","stringify","children","fileName","_jsxFileName","lineNumber","columnNumber","className","type","min","value","onChange","e","Number","target","style","width","marginTop","onClick","padding","_c","$RefreshReg$"],"sources":["C:/monami-client/src/pages/CartPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport ProductCard from '../components/ProductCard';\r\nimport './HomePage.css';\r\nimport { fetchProducts } from '../api/products';\r\n\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nfunction HomePage() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const query = useQuery();\r\n  const category = query.get('category');\r\n\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [quantities, setQuantities] = useState({}); // productId: 수량\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    fetchProducts(category)\r\n      .then(data => setProducts(data))\r\n      .catch(() => setProducts([]))\r\n      .finally(() => setLoading(false));\r\n  }, [category, location.search]);\r\n\r\n  const handleQuantityChange = (productId, qty) => {\r\n    if (qty < 0) return;\r\n    setQuantities(prev => ({\r\n      ...prev,\r\n      [productId]: qty,\r\n    }));\r\n  };\r\n\r\n  const handleAddToCart = () => {\r\n    // 수량 1 이상인 상품만 필터링\r\n    const selectedItems = products\r\n      .filter(product => quantities[product.id] > 0)\r\n      .map(product => ({\r\n        product,\r\n        quantity: quantities[product.id],\r\n      }));\r\n\r\n    if (selectedItems.length === 0) {\r\n      alert('수량을 1개 이상 선택해주세요.');\r\n      return;\r\n    }\r\n\r\n    // 기존 장바구니 불러오기\r\n    const existingCart = JSON.parse(localStorage.getItem('cart')) || [];\r\n\r\n    // 기존 장바구니에 새로 선택한 상품 합치기 (같은 상품은 수량 합산)\r\n    const updatedCart = [...existingCart];\r\n\r\n    selectedItems.forEach(({ product, quantity }) => {\r\n      const index = updatedCart.findIndex(item => item.product.id === product.id);\r\n      if (index >= 0) {\r\n        updatedCart[index].quantity += quantity;\r\n      } else {\r\n        updatedCart.push({ product, quantity });\r\n      }\r\n    });\r\n\r\n    localStorage.setItem('cart', JSON.stringify(updatedCart));\r\n\r\n    // 수량 초기화\r\n    setQuantities({});\r\n\r\n    // 장바구니 페이지로 이동\r\n    navigate('/cart');\r\n  };\r\n\r\n  if (loading) return <p>상품을 불러오는 중입니다...</p>;\r\n  if (products.length === 0) return <p>해당 카테고리의 상품이 없습니다.</p>;\r\n\r\n  return (\r\n    <div className=\"products-container\">\r\n      {products.map(product => (\r\n        <div key={product.id} className=\"product-item\">\r\n          <ProductCard product={product} />\r\n          <input\r\n            type=\"number\"\r\n            min=\"0\"\r\n            value={quantities[product.id] || 0}\r\n            onChange={e => handleQuantityChange(product.id, Number(e.target.value))}\r\n            style={{ width: '60px', marginTop: '5px' }}\r\n          />\r\n        </div>\r\n      ))}\r\n      <button onClick={handleAddToCart} style={{ marginTop: '20px', padding: '10px 20px' }}>\r\n        장바구니에 담기\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}